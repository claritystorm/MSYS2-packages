# Maintainer: damon-kwok <damon-kwok@outlook.com>

pkgname=('gmime3' 'gmime3-devel')
pkgver=3.2.6
pkgrel=1
pkgdesc="The GMime package contains a set of utilities for parsing and creating messages using the Multipurpose Internet Mail Extension (MIME) as defined by the applicable RFCs."
arch=('i686' 'x86_64')
groups=('libraries')
license=('GPL')
url="https://github.com/jstedfast/gmime"
depends=(glib2-devel libiconv-devel zlib-devel libgpg-error-devel)
makedepends=(gcc gcc-libs make libtool autoconf automake)
provides=(libgmime-3.0.so)
source=(http://ftp.gnome.org/pub/gnome/sources/gmime/3.2/gmime-${pkgver}.tar.xz)
md5sums=('656548dc431004d1ebf95e5d0bb4b9c8')

# depends=(glib2 gpgme zlib libidn2)
# makedepends=(gobject-introspection gtk-doc git vala docbook-utils)
# provides=(libgmime-3.0.so)
# _commit=6546ed5e2935e5f99e99e0311ea6cec6d6101aaf  # tags/3.2.6^0
# source=("git+https://github.com/jstedfast/gmime#commit=$_commit")
# sha256sums=('SKIP')


build() {
    cd "gmime-${pkgver}"

    ./configure --prefix=/usr
                # --disable-static
    make
}

package_gmime3() {
    cd "${srcdir}/gmime-3.2.6"
    make DESTDIR="${pkgdir}" install
    install -Dm644 COPYING "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE
}

package_gmime3-devel() {
    # pkgdesc="zlib headers and libraries"
    # groups=('development')
    # options=('staticlibs')  # needed by binutils testsuite
    # depends=("gmime3=${pkgver}")
    
    cd "${srcdir}/gmime-3.2.6"
    make DESTDIR="${pkgdir}" install
    install -Dm644 COPYING "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE
}
